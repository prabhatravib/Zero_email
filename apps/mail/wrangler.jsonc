{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "zero",
  "compatibility_date": "2025-06-27",
  "observability": {
    "enabled": true,
  },
  "build": {
    "upload": {
      "rules": [
        { "type": "CommonJS", "globs": ["**/*"] },
        { "type": "Ignore", "globs": [
          "**/sharp/**",
          "**/better-sqlite3/**",
          "**/@sentry/cli/**"
        ] }
      ]
    }
  },
  "durable_objects": {
    "bindings": [
      { "name": "ZERO_AGENT", "class_name": "ZeroAgent" },
      { "name": "ZERO_MCP", "class_name": "ZeroMCP" },
      { "name": "ZERO_DB", "class_name": "ZeroDB" },
      { "name": "ZERO_DRIVER", "class_name": "ZeroDriver" },
      { "name": "THINKING_MCP", "class_name": "ThinkingMCP" }
    ]
  },
  "kv_namespaces": [
    { "binding": "DB", "id": "<KV-ID-WILL-PASTE>" }
  ],
  "assets": {
    "directory": "./build/client/",
    "not_found_handling": "single-page-application",
    "html_handling": "force-trailing-slash",
  },
  "env": {
    "local": {
      "name": "zero-local",
      "vars": {
        "GOOGLE_CLIENT_ID": "",
        "GOOGLE_CLIENT_SECRET": "",
        "GOOGLE_REDIRECT_URI": "",
        "VITE_GOOGLE_CLIENT_ID": "",
        "VITE_PUBLIC_APP_URL": "http://localhost:3000",
        "VITE_PUBLIC_BACKEND_URL": "http://localhost:8787",
        "BETTER_AUTH_URL": "",
        "OPENAI_MODEL": "",
        "OPENAI_MINI_MODEL": "",
        "THREAD_SYNC_LOOP": "true",
      },
    },
    "staging": {
      "name": "zero-staging",
      "vars": {
        "GOOGLE_CLIENT_ID": "",
        "GOOGLE_CLIENT_SECRET": "",
        "GOOGLE_REDIRECT_URI": "",
        "VITE_GOOGLE_CLIENT_ID": "",
        "VITE_PUBLIC_BACKEND_URL": "https://sapi.0.email",
        "VITE_PUBLIC_APP_URL": "https://staging.0.email",
        "BETTER_AUTH_URL": "",
        "OPENAI_MODEL": "",
        "OPENAI_MINI_MODEL": "",
        "THREAD_SYNC_LOOP": "true",
      },
    },
    "production": {
      "name": "zero-production",
      "vars": {
        "GOOGLE_CLIENT_ID": "",
        "GOOGLE_CLIENT_SECRET": "",
        "GOOGLE_REDIRECT_URI": "",
        "VITE_GOOGLE_CLIENT_ID": "",
        "VITE_PUBLIC_BACKEND_URL": "https://api.0.email",
        "VITE_PUBLIC_APP_URL": "https://0.email",
        "BETTER_AUTH_URL": "",
        "OPENAI_MODEL": "",
        "OPENAI_MINI_MODEL": "",
        "THREAD_SYNC_LOOP": "true",
      },
    },
  },
}
